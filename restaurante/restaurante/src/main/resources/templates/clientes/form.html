<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Formulario Cliente - Sabor Gourmet</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body class="bg-light">

<!-- Header reutilizable -->
<div th:replace="fragments/header :: mainHeader"></div>

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">

            <div class="card shadow-lg border-0 rounded-4">
                <div class="card-header bg-danger text-white text-center rounded-top-4">
                    <h4 class="mb-0" th:text="${cliente.idCliente != null} ? 'Editar Cliente' : 'Registrar Nuevo Cliente'">
                        Registrar Nuevo Cliente
                    </h4>
                </div>

                <div class="card-body p-4">
                    <form th:action="@{/clientes/guardar}" th:object="${cliente}" method="post">

                        <!-- ID oculto para edición -->
                        <input type="hidden" th:field="*{idCliente}" />

                        <!-- DNI -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">DNI</label>
                            <input type="text" class="form-control rounded-3" th:field="*{dni}" placeholder="Ingrese DNI" required>
                            <div th:if="${#fields.hasErrors('dni')}" th:errors="*{dni}" class="text-danger small mt-1"></div>
                        </div>

                        <!-- Nombres -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Nombres</label>
                            <input type="text" class="form-control rounded-3" th:field="*{nombres}" placeholder="Ingrese nombres" required>
                            <div th:if="${#fields.hasErrors('nombres')}" th:errors="*{nombres}" class="text-danger small mt-1"></div>
                        </div>

                        <!-- Apellidos -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Apellidos</label>
                            <input type="text" class="form-control rounded-3" th:field="*{apellidos}" placeholder="Ingrese apellidos" required>
                            <div th:if="${#fields.hasErrors('apellidos')}" th:errors="*{apellidos}" class="text-danger small mt-1"></div>
                        </div>

                        <!-- Teléfono -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Teléfono</label>
                            <input type="text" class="form-control rounded-3" th:field="*{telefono}" placeholder="Ejemplo: 987654321">
                        </div>

                        <!-- Correo -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Correo</label>
                            <input type="email" class="form-control rounded-3" th:field="*{correo}" placeholder="ejemplo@correo.com">
                        </div>

                        <!-- Estado -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Estado</label>
                            <select class="form-select rounded-3" th:field="*{estado}">
                                <option th:value="ACTIVO" th:selected="${cliente.estado != null and cliente.estado.name() == 'ACTIVO'}">Activo</option>
                                <option th:value="INACTIVO" th:selected="${cliente.estado != null and cliente.estado.name() == 'INACTIVO'}">Inactivo</option>
                            </select>
                        </div>

                        <!-- Mesa -->
                        <div class="mb-4">
                            <label class="form-label fw-semibold">Mesa asignada</label>
                            <select class="form-select rounded-3" th:field="*{mesa.idMesa}">
                                <option value="">-- Seleccione una mesa --</option>
                                <option th:each="mesa : ${mesasDisponibles}"
                                        th:value="${mesa.idMesa}"
                                        th:text="${'Mesa ' + mesa.numero + ' - ' + mesa.estado}"
                                        th:selected="${cliente.mesa != null and cliente.mesa.idMesa == mesa.idMesa}">
                                </option>
                            </select>

                        </div>

                        <!-- Botones -->
                        <div class="d-flex justify-content-between">
                            <a th:href="@{/clientes}" class="btn btn-outline-secondary px-4 rounded-3">
                                <i class="bi bi-arrow-left-circle me-1"></i> Cancelar
                            </a>
                            <button type="submit" class="btn btn-danger px-4 rounded-3">
                                <i class="bi bi-check-circle me-1"></i> Guardar
                            </button>
                        </div>

                    </form>
                </div>
            </div>

        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
